:root { --bg-dark:#121212; --bg-panel:#1e1e1e; --bg-input:#242424; --text:#fff;
  --muted:#b0b0b0; --accent:#00ff88; --blue:#0066ff; --red:#ff4444; --border:#333;
  --shadow:0 8px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Inter,Arial,sans-serif;
  background:var(--bg-dark); color:var(--text); min-height:100vh; padding:24px}
.container{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:28px}
.panel{background:var(--bg-panel);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:22px}
.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;padding-bottom:12px;border-bottom:2px solid var(--accent)}
.panel-title{font-size:22px;font-weight:800;color:var(--accent)}
.status{padding:6px 12px;border-radius:999px;font-size:12px;font-weight:800;color:#111;background:var(--accent)}
.status.bad{background:var(--red)}

.grid-keys{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-bottom:18px}
.key{background:linear-gradient(145deg,#444,#262626);border:2px solid var(--border);border-radius:12px;min-height:86px;padding:18px;font-size:18px;font-weight:800;color:#fff;cursor:pointer;transition:.2s;display:flex;align-items:center;justify-content:center}
.key:hover{border-color:var(--accent);box-shadow:0 0 18px rgba(0,255,136,.35)}
.key.assigned{background:linear-gradient(145deg,var(--blue),#003fb6);border-color:var(--blue)}
.key.playing{background:linear-gradient(145deg,var(--accent),#05c86e);border-color:var(--accent);box-shadow:0 0 24px rgba(0,255,136,.6)}
.grid-keys .key:nth-child(5){grid-column:1/-1;justify-self:center;width:220px}

.stop{background:linear-gradient(145deg,var(--red),#cc0000);border:2px solid var(--red);border-radius:12px;color:#fff;padding:12px 24px;font-weight:800;cursor:pointer}

.section-title{font-size:16px;font-weight:800;color:var(--accent);margin:18px 0 10px}
.list{background:var(--bg-input);border:1px solid var(--border);border-radius:10px;max-height:320px;overflow:auto}
.row{display:flex;gap:12px;align-items:center;padding:12px;border-bottom:1px solid var(--border);cursor:pointer}
.row:last-child{border-bottom:none}
.row:hover{background:rgba(0,255,136,.07)}
.row.selected{background:rgba(0,255,136,.14);border-left:4px solid var(--accent)}
.thumb{width:42px;height:42px;border-radius:6px;background:#0b0b0b;display:flex;align-items:center;justify-content:center;font-size:14px;color:#bbb;overflow:hidden;position:relative}
.thumb img,.thumb video{width:100%;height:100%;object-fit:cover;display:block;border-radius:6px}
.info{flex:1}
.title{font-weight:700}
.meta{font-size:12px;color:var(--muted);margin-top:2px}

.label{display:block;margin:12px 0 6px;color:var(--muted);font-size:13px;font-weight:700}
.input,.select,.textarea{width:100%;background:var(--bg-input);border:1px solid var(--border);border-radius:8px;color:#fff;padding:12px;font-size:14px}
.textarea{min-height:96px;resize:vertical}
.btn{background:var(--accent);border:none;color:#111;padding:12px 18px;border-radius:8px;font-weight:800;cursor:pointer}
.btn:hover{filter:brightness(.95)}
.btn-danger{background:var(--red);color:#fff}

.alert{margin-bottom:12px;padding:12px;border-radius:10px;border:1px solid;display:none}
.alert.error{display:block;background:rgba(255,68,68,.1);border-color:#ff5f5f;color:#ff7c7c}
.alert.success{display:block;background:rgba(0,255,136,.1);border-color:#06d97d;color:#00ff88}

.current{background:#0c0c0c;border:1px solid var(--border);border-radius:10px;padding:14px;margin-top:12px}
.current .h{color:var(--accent);font-weight:800;margin-bottom:6px}

/* Modal / Sheet */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.78);z-index:9999}
.sheet{
  position:fixed;bottom:20px;left:20px;width:520px;height:520px;
  background:var(--bg-panel);border:2px solid var(--accent);border-radius:12px;
  box-shadow:0 10px 40px rgba(0,0,0,.5);display:flex;flex-direction:column;overflow:hidden;
  z-index:10000;
  /* CSS fallback resize (works in most modern browsers) */
  resize: both;
}
.sheet-h{backgrou
